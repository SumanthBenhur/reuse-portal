<%- include('partials/header') %>
<%- include('partials/navbar') %> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<link rel="stylesheet" href="css/profile.css">

<div class="page-content page-container" id="page-content">
    <div class="padding">
        <div class="row container d-flex justify-content-center">
            <div class="col-xl-8 col-md-12 info-card">
                <div class="card user-card-full">
                    <div class="row m-l-0 m-r-0">
                        <div class="col-md-4 bg-c-lite-green user-profile">
                            <div class="card-block text-center text-white">
                                <div class="m-b-25"> <img src="https://img.icons8.com/bubbles/100/000000/user.png" class="img-radius" alt="User-Profile-Image"> </div>
                                <h6 class="f-w-600" style="text-transform: uppercase;"><%= name %> </h6>
                                <button type="button" class="btn btn-outline-light btn-sm " data-bs-toggle="modal" data-bs-target="#editProfile">Edit Profile</button> <i class=" mdi mdi-square-edit-outline feather icon-edit m-t-10 f-16"></i>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card-block">
                                <h6 class="m-b-20 p-b-5 b-b-default f-w-600">Information</h6>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Email</p>
                                        <h6 class="text-muted f-w-400"><%= email %> </h6>
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Phone</p>
                                        <h6 class="text-muted f-w-400"><%= phone %> </h6>
                                    </div>
                                </div>
                                <h6 class="m-b-20 m-t-40 p-b-5 b-b-default f-w-600"></h6>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">PRN</p>
                                        <h6 class="text-muted f-w-400"><%= prn %> </h6>
                                    </div>
                                    <div class="col-sm-6">
                                        <p class="m-b-10 f-w-600">Whatsapp chat link</p>
                                        <h6 class="text-muted f-w-400">
                                            <a href="<%= walink %> ">
                                            <%= walink %> </h6>
                                        </a>
                                    </div>
                                </div>                         
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editProfile" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Edit Profile</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form action="/updateProfile" name="editProfile" method="POST">
              <div class="form-group">
                  <label for="name">Name</label>
                  <input type="text" class="form-control" name="name" id="name" value="<%= name %> ">
              </div>
              <div class="form-group">
                <label for="pno">Phone Number</label>
                <input type="tel" class="form-control" name="phone" id="phone" value="<%= phone%> ">
            </div>
            <div class="form-group">
                <label for="walink">Whatsapp Chat Link</label>
                <input type="url" class="form-control" name="walink" id="walink" value="<%= walink %> ">
            </div>
            <div class="form-group">
                <label for="prn">PRN</label>
                <input type="text" class="form-control" name="prn" id="prn" value="<%= prn %>" >
            </div>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Save changes</button>
        </div>
    </form>
      </div>
    </div>
  </div>


<br><br>
<h2>My Products</h2>

<div  class="container-fluid">
    <div class="row ">
    <% for(let i=0 ; i<variable.length ; i++) { %> 
        
       <div class="card-outer col-lg-4 col-md-6 col-sm-12 card-deck" >
        
        <div class="card " style="width: 100%;  " >
          <img class=" myProduct card-img-top" src="./uploads/<%= variable[i].img %>" alt="Card image cap">
          <div class="card-body">
            <h5 class="card-title">name:<%= variable[i].nop %></h5>
            <p class="card-text">
                
             <p> 
                 Description:<%= variable[i].dop.substring(0,100) + "...." %>               
                
             </p> <br>
              Contact-no:<%= variable[i].pno %> <br>            
              email: <%= variable[i].email %> <br>
          </p>
          <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#updateProduct">UPDATE</button>
          <a href="/delete/<%=variable[i]._id %> " class="btn btn-primary">DELETE</a>
            

          </div>
        </div> 
    </div>

    <div class="modal fade" id="updateProduct" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Update Product</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/update/<%=variable[i]._id%>" method="POST" name="updateForm">
                    <div class="form-group">
                        <label for="nop">Product Name</label>
                        <input type="text" name="nop" id="nop" value="<%= variable[i].nop %> "> 
                      </div>
                      <div class="form-group">
                        <select class=" form-group selectpicker dropdown show" data-style="btn-info" name="selectpicker" id="category" >
                          <optgroup class=" btn btn-secondary dropdown-toggle" label="Select category">
                            <option class="dropdown-item" name="default"  value="<%=variable[i].category %>" selected><%=variable[i].category %></option>
                            <option class="dropdown-item" name="table1" value="Furniture" >Furniture</option>
                            <option class="dropdown-item" name="table2" value="Stationary">Stationary</option>
                            <option class="dropdown-item" name="table3" value="Books">Books and Resources</option>
                          </optgroup>
                      </select>
                      </div>
          
                      <div class="form-group">
                        <label for="dop">Product Description</label>
                          <textarea type="text" class="form-control" id="dop" name="dop" rows="6" ><%=variable[i].dop%></textarea>
                      </div>
                
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Save Changes</button>
            </div>
        </form>
          </div>
        </div>
      </div>
    
        <% }  %>
        
     
    </div> 
  </div>
  <script src="js/editProfile.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
